<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLAP | Prática de Conversação Básica</title>
    <!-- Favicon da SLAP -->
    <link rel="icon" type="image/png" href="https://res.cloudinary.com/dqfi22uz0/image/upload/v1749543469/SLAP_FAVICON_AMARELO_coilvj.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: DM Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* Aplicando a fonte padrão e cores */
        html, body {
            height: 100%;
            overflow-x: hidden;
            transition: background-color 0.4s ease;
        }
        body {
            font-family: 'DM Sans', sans-serif;
            display: flex;
            flex-direction: column;
            /* Cor de fundo padrão (será sobrescrita pelo JS/classes) */
            background-color: #1c1917; /* stone-900 (Fundo inicial escuro) */
            color: #f5f5f4; /* stone-100 (Cor inicial do texto) */
            overflow-y: auto; 
        }

        /* Classes dinâmicas para mudar o fundo no JS */
        .bg-dark { background-color: #1c1917; color: #f5f5f4; }
        .bg-yellow { background-color: #F1D24B; color: #44403c; }
        .bg-white-practice { background-color: white; color: #44403c; }
        
        main {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 1rem 1rem;
            width: 100%;
        }

        .screen-view {
            width: 100%; 
            max-width: 48rem; /* Limita a largura do conteúdo para desktop */
            text-align: center;
            padding: 1.5rem 0;
            height: auto;
        }

        .dark-splash {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .action-button {
             background-color: #F1D24B; 
             color: #44403c; /* stone-800 */
             border: none; 
             padding: 0.75rem 1.5rem; 
             border-radius: 9999px; 
             font-weight: 700; 
             cursor: pointer; 
             transition: background-color 0.2s, transform 0.2s;
             display: inline-flex;
             align-items: center;
             gap: 0.5rem;
             text-decoration: none;
        }
        .action-button:hover:not(:disabled) {
            background-color: #eab308; /* Darker yellow */
            transform: translateY(-2px);
        }
        .action-button:disabled {
            background-color: #a8a29e; /* stone-400 */
            cursor: not-allowed;
        }
        
        /* Estilos do formulário para manter a estética */
        .fill-in-input {
            width: 100%;
            padding: 0.75rem 1rem;
            background-color: #f5f5f4; /* stone-100 */
            border: 2px solid #e7e5e4; /* stone-200 */
            border-radius: 0.5rem;
            font-size: 1rem;
            color: #44403c;
            transition: border-color 0.2s;
        }
        .fill-in-input:focus {
            outline: none;
            border-color: #F1D24B;
        }

    </style>
</head>
<body class="bg-dark text-stone-100">

    <main id="app-container">
        <!-- Contêiner principal para centralizar e limitar o conteúdo no desktop -->
        <div class="w-full max-w-7xl mx-auto">
        
            <!-- SPLASH SCREEN 1: READY QUESTION -->
            <div id="splash-1-view" class="dark-splash screen-view mx-auto md:max-w-xl">
                <img src="https://res.cloudinary.com/dqfi22uz0/image/upload/v1749349751/DBB440C2-684E-4DCF-9CD3-B2DDC18F1E53_3_vgocga.jpg" alt="SLAP Logo" class="w-32 h-auto mx-auto mb-4 sm:mb-6 rounded-lg">
                <h1 class="text-4xl sm:text-5xl font-bold text-[#F1D24B] mb-4 sm:mb-6">
                    Você consegue responder 100% em inglês?
                </h1>
                <!-- ALTERAÇÃO AQUI: VAI DIRETO PARA O FORMULÁRIO -->
                <button class="action-button bg-[#F1D24B] text-stone-900 text-xl px-12 py-4" onclick="goToForm()">
                    Pode mandar!
                </button>
            </div>

            <!-- SPLASH SCREEN 2: REMOVIDA -->

            <!-- Passo 1: Formulário de Inscrição (Fundo Amarelo) -->
            <div id="form-view" class="screen-view hidden flex justify-center w-full mx-auto">
                <!-- Conteúdo do Formulário -->
                <div class="text-stone-800 p-6 sm:p-8 rounded-xl text-center w-full md:max-w-lg">
                    <!-- Ícone Original (Fundo Amarelo) - rounded-lg ATIVO -->
                    <img src="https://res.cloudinary.com/dqfi22uz0/image/upload/v1749349751/DBB440C2-684E-4DCF-9CD3-B2DDC18F1E53_3_vgocga.jpg" alt="SLAP Logo" class="w-32 h-auto mx-auto mb-4 rounded-lg">
                    <h1 class="text-3xl font-bold text-stone-900">Gerador de Perguntas</h1>
                    <p class="text-stone-700 mt-2 mb-6">Preencha seus dados para iniciar a prática de conversação.</p>
                    <!-- Formspree action é configurado para receber os dados -->
                    <form id="lead-form" action="https://formspree.io/f/mblyowaq" method="POST" class="text-left space-y-4 max-w-sm mx-auto">
                        <div>
                            <label for="name" class="font-semibold text-stone-800 block mb-1">Nome Completo</label>
                            <input type="text" id="name" name="name" class="w-full px-4 py-2 bg-yellow-50 border-2 border-transparent rounded-lg focus:outline-none focus:border-stone-800 text-stone-900 placeholder-stone-500" required>
                        </div>
                        <div>
                            <label for="email" class="font-semibold text-stone-800 block mb-1">E-mail</label>
                            <input type="email" id="email" name="email" class="w-full px-4 py-2 bg-yellow-50 border-2 border-transparent rounded-lg focus:outline-none focus:border-stone-800 text-stone-900 placeholder-stone-500" required>
                        </div>
                        <div>
                            <label for="whatsapp" class="font-semibold text-stone-800 block mb-1">WhatsApp (com DDD)</label>
                            <input type="tel" id="whatsapp" name="whatsapp" class="w-full px-4 py-2 bg-yellow-50 border-2 border-transparent rounded-lg focus:outline-none focus:border-stone-800 text-stone-900 placeholder-stone-500" placeholder="(XX) XXXXX-XXXX" required>
                        </div>
                        <div class="text-center pt-4">
                            <button id="submit-lead-btn" type="submit" class="action-button w-full sm:w-auto justify-center bg-stone-800 text-white hover:bg-stone-900">
                                Começar a Prática
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Passo 2: Tela de Prática Conversacional (Fundo Branco) -->
            <div id="practice-view" class="screen-view hidden mx-auto md:max-w-3xl">
                 <div class="p-6 sm:p-8 w-full text-stone-800">
                    <div class="text-center mb-8">
                        <!-- Ícone para Fundo Branco -->
                        <img src="https://res.cloudinary.com/dqfi22uz0/image/upload/v1759294967/SLAP_TIPO_PRETO_2_kismg9.png" alt="SLAP Logo Preto" class="w-32 h-auto mx-auto mb-4">
                        <!-- Título e subtítulo removidos -->
                    </div>

                    <div class="bg-stone-50 p-6 sm:p-8 rounded-xl shadow-xl border border-stone-200">
                        <!-- Área da Pergunta -->
                        <p class="text-lg font-semibold text-stone-700 mb-2">Pergunta Atual:</p>
                        <h3 class="text-2xl sm:text-3xl font-bold mb-6 text-blue-700" id="current-question">
                            Clique em "Gerar Pergunta" para começar!
                        </h3>

                        <!-- Botão de Resposta -->
                        <div id="answer-toggle" class="text-center mb-4">
                            <button id="show-answer-btn" class="action-button bg-stone-800 text-white px-6 py-3 hover:bg-stone-900" onclick="toggleAnswer(true)">
                                Ver Possível Resposta
                            </button>
                        </div>
                        
                        <!-- Área da Resposta Oculta -->
                        <div id="possible-answer-box" class="mt-4 p-4 bg-yellow-100 border border-yellow-300 rounded-lg text-yellow-900 text-left font-semibold hidden transition duration-300">
                            <span id="possible-answer-text"></span>
                        </div>
                    </div>

                    <!-- Botão Principal de Geração -->
                    <div class="mt-8 text-center">
                        <button id="generate-button" class="action-button text-lg px-8 py-3 w-full sm:w-auto" onclick="displayPracticeQuestion()">
                            Gerar Próxima Pergunta &rarr;
                        </button>
                    </div>
                 </div>
            </div>

            <!-- result-view removida -->

        </div>
    </main>
    
    <!-- Áudio removido -->

    <script>
        // --- ELEMENTOS DO DOM ---
        const splash1View = document.getElementById('splash-1-view');
        // splash2View removido do HTML e do JS
        const formView = document.getElementById('form-view');
        const practiceView = document.getElementById('practice-view'); // Novo ID
        const leadForm = document.getElementById('lead-form');
        
        let studentName = '';
        let studentEmail = '';
        let studentWhatsapp = '';

        // --- DADOS DA PRÁTICA CONVERSACIONAL (50 Perguntas) ---
        // Perguntas e respostas básicas
        const practiceQuestions = [
            { question: "How do you spell your last name?", answer: "I spell it: S-M-I-T-H." },
            { question: "Where are you from?", answer: "I'm from Rio de Janeiro, Brazil." },
            { question: "Where do you live?", answer: "I live in São Paulo." },
            { question: "How old are you?", answer: "I am 30 years old." },
            { question: "When were you born?", answer: "I was born in 1995." },
            { question: "What is your favorite color?", answer: "My favorite color is blue." },
            { question: "Do you have any pets?", answer: "Yes, I have a cat named Whiskers." },
            { question: "What time do you wake up?", answer: "I usually wake up at 7:00 AM." },
            { question: "What do you do in your free time?", answer: "I enjoy reading and watching movies." },
            { question: "What kind of music do you like?", answer: "I like pop and rock music." },
            { question: "How many languages do you speak?", answer: "I speak two languages: Portuguese and English." },
            { question: "What is your job?", answer: "I am a software developer." },
            { question: "Do you like to cook?", answer: "Yes, I love cooking Italian food." },
            { question: "What is your favorite food?", answer: "My favorite food is pizza." },
            { question: "Do you have brothers or sisters?", answer: "I have one brother." },
            { question: "What is the weather like today?", answer: "It's sunny and warm today." },
            { question: "What did you eat for breakfast?", answer: "I ate toast and drank coffee." },
            { question: "Where did you go yesterday?", answer: "I went to the park." },
            { question: "What is your favorite season?", answer: "My favorite season is summer." },
            { question: "Do you prefer coffee or tea?", answer: "I prefer coffee, definitely." },
            { question: "What is your favorite animal?", answer: "My favorite animal is the elephant." },
            { question: "Can you play a musical instrument?", answer: "No, I cannot play an instrument." },
            { question: "What is your favorite sport?", answer: "My favorite sport is basketball." },
            { question: "How do you travel to work/school?", answer: "I take the bus." },
            { question: "Do you like reading books?", answer: "Yes, I read every evening." },
            { question: "What is your favorite movie?", answer: "My favorite movie is *The Godfather*." },
            { question: "Do you like to travel?", answer: "Yes, I travel every year." },
            { question: "What country do you want to visit?", answer: "I want to visit Japan." },
            { question: "What time do you go to bed?", answer: "I go to bed around 11:00 PM." },
            { question: "How often do you exercise?", answer: "I exercise three times a week." },
            { question: "What is your phone number?", answer: "My number is 555-0101." },
            { question: "What day is today?", answer: "Today is Wednesday." },
            { question: "What is your mother's name?", answer: "My mother's name is Maria." },
            { question: "What is the biggest city near you?", answer: "The biggest city near me is Belo Horizonte." },
            { question: "Are you married?", answer: "No, I am single." },
            { question: "What is your favorite time of day?", answer: "I love the early morning." },
            { question: "Do you watch TV?", answer: "Sometimes, I watch the news." },
            { question: "What is the last thing you bought?", answer: "I bought new running shoes." },
            { question: "What is your hobby?", answer: "My hobby is painting." },
            { question: "What is your address?", answer: "My address is 123 Main Street." },
            { question: "What languages are you learning now?", answer: "I am learning Spanish." },
            { question: "What is your favourite thing about your city?", answer: "I love the beaches here." },
            { question: "Do you like shopping?", answer: "Not really, but I do it when necessary." },
            { question: "What is your favorite holiday?", answer: "Christmas is my favorite holiday." },
            { question: "How do you relax?", answer: "I relax by listening to music." },
            { question: "What is your morning routine?", answer: "I drink coffee and check emails." },
            { question: "Do you prefer mountains or the sea?", answer: "I prefer the sea." },
            { question: "What is your biggest dream?", answer: "My biggest dream is to start my own business." },
            { question: "What is your least favorite chore?", answer: "Washing dishes is my least favorite chore." },
            { question: "What makes you happy?", answer: "Spending time with my friends makes me happy." },
            { question: "What is your favorite type of book?", answer: "I enjoy science fiction novels." },
            { question: "What do you do on weekends?", answer: "I often visit family or go hiking." },
            { question: "Do you use social media often?", answer: "Yes, I check social media every day." },
            { question: "What is your best friend's name?", answer: "My best friend's name is Alex." },
            { question: "How was your day?", answer: "My day was good, thank you for asking." }
        ];
        let currentQuestionIndex = -1; // Começa em -1 para que a primeira chamada vá para o índice 0

        // --- FUNÇÕES DE NAVEGAÇÃO ENTRE TELAS ---
        function hideAllViews() {
            splash1View.classList.add('hidden');
            // splash2View removido
            formView.classList.add('hidden');
            practiceView.classList.add('hidden');
            // resultView removido
        }

        // Função para aplicar as classes de fundo ao body
        function setBodyBackground(viewId) {
            document.body.classList.remove('bg-dark', 'bg-yellow', 'bg-white-practice', 'text-stone-100', 'text-stone-800');
            
            if (viewId === 'splash-1-view') {
                document.body.classList.add('bg-dark', 'text-stone-100');
            } else if (viewId === 'form-view') {
                document.body.classList.add('bg-yellow', 'text-stone-800');
            } else if (viewId === 'practice-view') {
                document.body.classList.add('bg-white-practice', 'text-stone-800');
            }
        }

        function startSplash1() {
            hideAllViews();
            setBodyBackground('splash-1-view');
            splash1View.classList.remove('hidden');
        }

        // goToSplash2 foi removida
        
        window.goToForm = function() {
            hideAllViews();
            setBodyBackground('form-view');
            formView.classList.remove('hidden');
        }
        
        // --- FUNÇÕES DE PRÁTICA CONVERSACIONAL ---

        function startPractice() {
            // Reseta o índice para -1 (A primeira chamada de displayQuestion irá para o índice 0)
            currentQuestionIndex = -1; 
            // Embaralha as perguntas para começar o ciclo
            shuffleArray(practiceQuestions);
            displayPracticeQuestion(); // Exibe a primeira pergunta
        }

        /**
         * Função utilitária para embaralhar um array (algoritmo Fisher-Yates)
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Exibe a próxima pergunta na ordem embaralhada, começando um novo ciclo se necessário.
         */
        window.displayPracticeQuestion = function() {
            // Se o índice for o último, reinicia o ciclo e re-embaralha
            if (currentQuestionIndex >= practiceQuestions.length - 1) {
                shuffleArray(practiceQuestions);
                currentQuestionIndex = 0;
            } else {
                // Avança para a próxima pergunta na ordem embaralhada
                currentQuestionIndex++;
            }

            const questionData = practiceQuestions[currentQuestionIndex];
            
            document.getElementById('current-question').textContent = questionData.question;
            document.getElementById('possible-answer-text').textContent = questionData.answer;
            document.getElementById('generate-button').textContent = "Gerar Próxima Pergunta →";

            // Esconde a resposta ao gerar a próxima pergunta
            toggleAnswer(false);
        }

        /**
         * Mostra ou esconde a resposta possível.
         */
        window.toggleAnswer = function(show) {
            const answerBox = document.getElementById('possible-answer-box');
            const showButton = document.getElementById('show-answer-btn');
            
            if (show) {
                answerBox.classList.remove('hidden');
                showButton.textContent = "Resposta à Vista!";
                showButton.disabled = true;
                showButton.classList.remove('hover:bg-stone-900', 'bg-stone-800');
                showButton.classList.add('bg-stone-500', 'cursor-default');
            } else {
                answerBox.classList.add('hidden');
                showButton.textContent = "Ver Possível Resposta";
                showButton.disabled = false;
                showButton.classList.add('hover:bg-stone-900', 'bg-stone-800');
                showButton.classList.remove('bg-stone-500', 'cursor-default');
            }
        }
        
        // --- EVENTO DE ENVIO DO FORMULÁRIO (INICIA A PRÁTICA E CAPTURA O LEAD) ---
        leadForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // 1. Armazena os dados do utilizador
            studentName = document.getElementById('name').value;
            studentEmail = document.getElementById('email').value;
            studentWhatsapp = document.getElementById('whatsapp').value;

            // 2. Envia os dados para o Formspree usando FormData (o Formspree lida melhor com isso)
            const submissionData = new FormData(leadForm);
            
            // Inicia a transição para a tela de prática IMEDIATAMENTE.
            // O Formspree fetch continua em segundo plano.
            formView.classList.add('hidden');
            setBodyBackground('practice-view');
            practiceView.classList.remove('hidden');
            startPractice(); // Inicia a interface de prática

            fetch(leadForm.action, {
                method: 'POST',
                // Usamos o FormData diretamente, o que é mais robusto para CORS em alguns ambientes.
                // O Content-Type é definido automaticamente pelo FormData se não definirmos.
                body: submissionData,
                headers: { 
                    'Accept': 'application/json' 
                    // Removendo o Content-Type para permitir que FormData o defina corretamente com boundary.
                }
            }).then(response => {
                if (response.ok) {
                    console.log("Dados do lead enviados com sucesso para o Formspree.");
                } else {
                    // MUDANÇA AQUI: Mostra o status do erro HTTP
                    console.error(`Houve um problema ao enviar o lead para o Formspree. Status: ${response.status} (${response.statusText}). Verifique a ativação do formulário Formspree.`);
                }
            }).catch(error => {
                // MUDANÇA AQUI: Mensagem de erro de rede
                console.error("Erro de conexão ou rede ao enviar o lead:", error);
            });
        });

        // --- INICIA O FLUXO NO PRIMEIRO SPLASH SCREEN ---
        window.onload = startSplash1;
    </script>
</body>
</html>
